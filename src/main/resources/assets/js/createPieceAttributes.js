//CREATED BY IRVIN UMAÃ‘A

/**
* Card click event handler: clears all cards from the selectedCard Class, and add it to the clicked (selected card)
* @card: The clicked card instance. 
* @return: void. 
*/
function checkCard(card){
	$(".attribute-card").removeClass("selectedCard");
	$(card).addClass("selectedCard");
}

/**
* Deletes a selected card using the selectedCard class. 
* @card_button: the delete card button (not the actual card instance). 
* @return: void. 
*/
function deleteCard(card_button) {
	//TODO Verify with the user. 
	$(card_button).addClass("selectedCard");
	$(".attribute-card").has(".selectedCard").fadeOut( "slow", function() {
    	this.remove();
  });
}

/**
* Add a card (generated by a template), as to allow the input of a property. 
* @return: void. 
*/
function addProperty(){
	console.log($(".cardTemplate").length);
	var newCard = $(".cardTemplate").clone().attr("display","inline-block").removeClass("cardTemplate");
	$("#attribute-card-list").append(newCard);
	
}

function saveAttributes(){
    var text = [];
    var attributes = "{\n";

    $("input").each(function() {
        text.push($(this).val());
    });
    for(i = 3; i < text.length; i = i+2){
        attributes += "\"" + text[i] + "\": \"" + text[i+1] + "\",\n";
    }
        $.ajax({
            url: "/methods/saveAttributes",
            type: 'POST',
            data: JSON.stringify({
            			auth: {
            				userID: Cookies.get("userID"),
            				accessToken: Cookies.get("accessToken")
            			},
            			piece: attributes
            		}),
            contentType: "text/plain",
            success:function(data, textStatus, jqXHR){
                console.log("attributes saved in server directory")},
            error:function(jqXHR, textStatus, errorThrown ){
                console.log(errorThrown);
            }
        });

}